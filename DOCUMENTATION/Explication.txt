

* Bases de données : 
- On a utilisé SQL Server Management Studio comme SGBD 

-----------------------------------------------------------------------------------------------------------------------------
* Architechture globale 
( utilisation d'une classe DatabaseConnection , les classes DAL: Data Access Layer et Bases de données)

Interface 
    ↓ appelle
Couche DAL
    ↓ utilise
DatabaseConnection.cs
    ↓ exécute
Base de données SQL Server

------------------------------------------------------------------------------------------------------------------------------

* Connexion à la base de données : 
- On a utilisé une classe DatabaseConnection qui gère toute la communication avec SQL Server.
- Elle contient :
     • La connection string (ligne 20-23) qui dit où est la base de données ("Data Source=localhost\SQLEXPRESS;"    
"Initial Catalog=Projet_Pharmacie;" "Integrated Security=True;").

     • GetConnection() → Crée et retourne une connexion SQL (Utilisée par toutes les autres méthodes)

     • TestConnection() → Teste si la connexion fonctionne (Utile au démarrage de l'application)

     • ExecuteQuery() pour lire des données (SELECT)

     • ExecuteNonQuery() pour ajouter/modifier/supprimer des données (INSERT/UPDATE/DELETE)

     •ExecuteScalar()  pour récupérer UNE SEULE valeur

     •Gestion d'erreurs : Try-catch avec MessageBox pour informer l'utilisateur en cas d'échec de connexion



    
- Toutes les autres classes (ProduitDAL, VenteDAL ..) utilisent cette classe pour communiquer avec SQL Server.

----------------------------------------------------------------------------------------------------------------------

* Comment on charge les données depuis la base ?

- Chaque classe DAL possède une méthode GetAll[Entité]() 
  Exemple : ProduitDAL.GetAllProduits()
  
- Cette méthode :
  • Exécute une requête SELECT pour récupérer toutes les lignes
  • Utilise DatabaseConnection.ExecuteQuery(query)
  • Retourne un DataTable contenant les résultats

- Dans l'interface (ex: GestionStock.cs) :
  • Méthode ChargerStock() qui appelle ProduitDAL.GetAllProduits()
  • Lie les données au DataGridView : dgv_GS.DataSource = dt;
  • Cette méthode est appelée :
    - Au chargement du formulaire (Form_Load)
    - Après chaque ajout/modification/suppression
    - Pour rafraîchir l'affichage après une recherche

Exemple de code :
  DataTable dt = ProduitDAL.GetAllProduits();
  dgv_GS.DataSource = dt;
  

----------------------------------------------------------------------------------------------------------------------

 * Comment on met à jour les données ?
 - Chaque classe DAL utilise DatabaseConnection.ExecuteNonQuery() pour modifier la base de données.
 Exemple : ProduitDAL.cs : 

 -- Ajouter un produit : 
    •Construit une requête INSERT INTO Produits
    •Utilise des paramètres : @Reference, @TypeProduit, @NomProduit ..
    •Appelle DatabaseConnection.ExecuteNonQuery(query, parameters)
    •Retourne true si réussi, false sinon.

 -- Modifier le prix :
    •Construit une requête  UPDATE Produits SET Prix = @NouveauPrix WHERE Reference = @Reference
    •Met aussi à jour la date de modification automatiquement 
..

 - Modifications et mises à jour dans les codes des interfaces (.cs) 
 Exemple : GestionStock.cs : 
   •L'utilisateur remplit les champs (TextBox) et clique sur un bouton .
   •Validation des données (vérification des champs vides, format)
   •Appel de la méthode DAL correspondante (ex: ProduitDAL.ModifierPrixProduit())
   •La méthode DAL appelle DatabaseConnection.ExecuteNonQuery() avec la requête SQL et les paramètres
   •Rafraîchissement du DataGridView via ChargerStock() pour afficher les changements
  
----------------------------------------------------------------------------------------------------------------------

* Comment effectuer une recherche ?
Exemple : ProduitDAL.cs :
 - Méthdode dans DAL : RechercherProduits(string nomProduit) dans ProduitDAL
 - Requête SQL avec LIKE : WHERE NomProduit LIKE @NomProduit
 - Retour des résultats : ExecuteQuery() retourne un DataTable qui est lié au DataGridView
 - Méthodes additionnelles : GetProduitByReference() pour recherche exacte, ReferenceExiste() pour vérification .


